version: 1.0
runtime: php81
build:
  commands:
    build:
      - yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
      - yum install https://rpms.remirepo.net/enterprise/remi-release-7.rpm
      - yum install yum-utils -y
      - yum-config-manager --enable remi-php81
      - yum install -y php-cli php-imagick php-mbstring php-pear php-devel php-imagick php-opcache php-intl php-mysqlnd php-gd php-exif php-xsl php-bcmath php-mysqli php-sodium php-mailparse
    post-build:
      - composer install --prefer-dist --no-progress --optimize-autoloader --no-dev
      - composer vendor-expose copy
  env:
    - name: GRAPHQL_DEV_MODE
      value: true
run:
  runtime-version: 8.1.27
  command: platform/start.sh
  network:
    port: 8000
    env: MY_APP_PORT
  env:
    - name: MY_VAR_EXAMPLE
      value: "example"
